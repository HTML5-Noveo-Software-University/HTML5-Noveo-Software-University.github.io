mixin icon(iconName)
    .icon(class='.icon--'+iconName)
        svg
            use(xlink:href="#"+iconName)
doctype html
<!--[if IE 9 ]><html dir="ltr" lang="ru" class="ie9"><![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
html(dir="ltr" lang="en")
<!--<![endif]-->
    block layout-settings
        - var pageTitle = 'Courses'

    block visible
        head
            meta(charset="utf-8")
            meta(name="viewport", content="width=device-width, initial-scale=1")
            meta(name="apple-mobile-web-app-status-bar-style", content="black")
            meta(name="apple-mobile-web-app-capable", content="yes")
            meta(name="apple-mobile-web-app-status-bar-style" content="black-translucent")
            title #{pageTitle}
            meta(name="apple-mobile-web-app-title" content="#{pageTitle}")
            //--- Fonts ---//

            //--- Styles ---//
            link(rel='stylesheet', href='./static/css/main.css')

    body
        include ../blocks/graphics/svg-sprite.pug

        block body
            .page
                include ../blocks/common/header.pug
                .content
                    block content
                    block aside
                        include ../blocks/common/aside-nav.pug
                include ../blocks/common/footer.pug
            block modals
        block scripts
            script.
                function loadLocal(name) {
                    console.log('Failed to load external! TODO - polyfill', name)
                }
            script(src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"  onerror="loadLocal('jquery')")
            script.
                // TODO: refactor + make it responsive (recalc height & offsets)
                $stick = $('aside');
                $foot = $('footer');
                margin = 0;
                offtop = $stick.offset().top - margin;
                offbtm = $foot.offset().top - ( margin*2 + $stick.height());
                $(window).scroll(function () {
                  scrtop = $(window).scrollTop();
                  if (scrtop > offtop && $stick.hasClass('natural')) {
                    $stick.removeClass('natural').addClass('fixed').css('top', margin);
                  }
                  if (offtop > scrtop && $stick.hasClass('fixed')) {
                    $stick.removeClass('fixed').addClass('natural').css('top', '');
                  }
                  if (scrtop > offbtm && $stick.hasClass('fixed')) {
                    $stick.removeClass('fixed').addClass('bottom').css('top', offbtm+margin-offtop);
                  }
                  if (offbtm > scrtop && $stick.hasClass('bottom')) {
                    $stick.removeClass('bottom').addClass('fixed').css('top', margin);
                  }
                });





